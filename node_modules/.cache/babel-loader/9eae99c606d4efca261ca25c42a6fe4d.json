{"ast":null,"code":"import _regeneratorRuntime from\"C:/\\u0418\\u0440\\u0438\\u043D\\u0430/Projects/guitars-shop/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/\\u0418\\u0440\\u0438\\u043D\\u0430/Projects/guitars-shop/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{createAsyncThunk}from'@reduxjs/toolkit';import{errorHandle}from'../services/error-handle';import{loadCatalog,loadGuitar,loadComments}from'./guitars-data/guitars-data';import{APIRoute}from'../consts';export var fetchCatalogGuitars=createAsyncThunk('guitars/fetchCatalogGuitars',/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(_arg,_ref){var dispatch,api,_yield$api$get,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch=_ref.dispatch,api=_ref.extra;_context.prev=1;_context.next=4;return api.get(APIRoute.Guitars);case 4:_yield$api$get=_context.sent;data=_yield$api$get.data;dispatch(loadCatalog(data));_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](1);errorHandle(_context.t0);case 12:case\"end\":return _context.stop();}}},_callee,null,[[1,9]]);}));return function(_x,_x2){return _ref2.apply(this,arguments);};}());export var fetchGuitar=createAsyncThunk('guitars/fetchGuitar',/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(id,_ref3){var dispatch,api,_yield$api$get2,data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:dispatch=_ref3.dispatch,api=_ref3.extra;_context2.prev=1;_context2.next=4;return api.get(\"\".concat(APIRoute.Guitars,\"/\").concat(id));case 4:_yield$api$get2=_context2.sent;data=_yield$api$get2.data;dispatch(loadGuitar(data));_context2.next=12;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](1);errorHandle(_context2.t0);case 12:case\"end\":return _context2.stop();}}},_callee2,null,[[1,9]]);}));return function(_x3,_x4){return _ref4.apply(this,arguments);};}());export var fetchComments=createAsyncThunk('guitar/fetchComments',/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(id,_ref5){var dispatch,api,_yield$api$get3,data;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:dispatch=_ref5.dispatch,api=_ref5.extra;_context3.prev=1;_context3.next=4;return api.get(\"\".concat(APIRoute.Guitars,\"/\").concat(id,\"/comments\"));case 4:_yield$api$get3=_context3.sent;data=_yield$api$get3.data;dispatch(loadComments(data));_context3.next=12;break;case 9:_context3.prev=9;_context3.t0=_context3[\"catch\"](1);errorHandle(_context3.t0);case 12:case\"end\":return _context3.stop();}}},_callee3,null,[[1,9]]);}));return function(_x5,_x6){return _ref6.apply(this,arguments);};}());export var addCommentAction=createAsyncThunk('guitar/addCommentAction',/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(comment,_ref7){var dispatch,api;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:dispatch=_ref7.dispatch,api=_ref7.extra;_context4.prev=1;_context4.next=4;return api.post(APIRoute.Comments,comment);case 4:_context4.next=9;break;case 6:_context4.prev=6;_context4.t0=_context4[\"catch\"](1);errorHandle(_context4.t0);case 9:case\"end\":return _context4.stop();}}},_callee4,null,[[1,6]]);}));return function(_x7,_x8){return _ref8.apply(this,arguments);};}());","map":{"version":3,"names":["createAsyncThunk","errorHandle","loadCatalog","loadGuitar","loadComments","APIRoute","fetchCatalogGuitars","_arg","dispatch","api","extra","get","Guitars","data","fetchGuitar","id","fetchComments","addCommentAction","comment","post","Comments"],"sources":["C:/Ирина/Projects/guitars-shop/src/store/api-actions.ts"],"sourcesContent":["import {AxiosInstance} from 'axios';\r\nimport { createAsyncThunk } from '@reduxjs/toolkit';\r\nimport { AppDispatch, State } from '../types/state';\r\nimport { errorHandle } from '../services/error-handle';\r\nimport { loadCatalog, loadGuitar, loadComments } from './guitars-data/guitars-data';\r\n\r\nimport { Guitar, Guitars, NewComment, Comments } from '../types/guitars';\r\nimport { APIRoute } from '../consts';\r\n\r\nexport const fetchCatalogGuitars = createAsyncThunk<void, undefined, {\r\n  dispatch: AppDispatch,\r\n  state: State,\r\n  extra: AxiosInstance\r\n}>(\r\n  'guitars/fetchCatalogGuitars',\r\n  async(_arg, {dispatch, extra: api})=>{\r\n    try {\r\n      const { data } = await api.get<Guitars>(APIRoute.Guitars);\r\n      dispatch(loadCatalog(data));\r\n    } catch (error) {\r\n      errorHandle(error);\r\n    }\r\n  },\r\n);\r\n\r\nexport const fetchGuitar = createAsyncThunk<void, number, {\r\n  dispatch: AppDispatch,\r\n  state: State,\r\n  extra: AxiosInstance\r\n}>(\r\n  'guitars/fetchGuitar',\r\n  async (id, {dispatch, extra: api}) => {\r\n    try {\r\n      const {data} = await api.get<Guitar>(`${APIRoute.Guitars}/${id}`);\r\n      dispatch(loadGuitar(data));\r\n    } catch (error) {\r\n      errorHandle(error);\r\n    }\r\n  },\r\n);\r\n\r\nexport const fetchComments = createAsyncThunk<void, number, {\r\n  dispatch: AppDispatch,\r\n  state: State,\r\n  extra: AxiosInstance\r\n}>(\r\n  'guitar/fetchComments',\r\n  async (id, {dispatch, extra: api}) => {\r\n    try {\r\n      const {data} = await api.get<Comments>(`${APIRoute.Guitars}/${id}/comments`);\r\n      dispatch(loadComments(data));\r\n    } catch (error) {\r\n      errorHandle(error);\r\n    }\r\n  },\r\n);\r\n\r\nexport const addCommentAction  = createAsyncThunk<void, NewComment, {\r\n  dispatch: AppDispatch,\r\n  state: State,\r\n  extra: AxiosInstance\r\n}>(\r\n  'guitar/addCommentAction',\r\n  async (comment, {dispatch, extra: api}) => {\r\n    try {\r\n      await api.post<Comments>(APIRoute.Comments, comment);\r\n    } catch (error) {\r\n      errorHandle(error);\r\n    }\r\n  },\r\n);\r\n\r\n\r\n"],"mappings":"0SACA,OAASA,gBAAT,KAAiC,kBAAjC,CAEA,OAASC,WAAT,KAA4B,0BAA5B,CACA,OAASC,WAAT,CAAsBC,UAAtB,CAAkCC,YAAlC,KAAsD,6BAAtD,CAGA,OAASC,QAAT,KAAyB,WAAzB,CAEA,MAAO,IAAMC,oBAAmB,CAAGN,gBAAgB,CAKjD,6BALiD,6FAMjD,iBAAMO,IAAN,8JAAaC,QAAb,MAAaA,QAAb,CAA8BC,GAA9B,MAAuBC,KAAvB,uCAE2BD,IAAG,CAACE,GAAJ,CAAiBN,QAAQ,CAACO,OAA1B,CAF3B,qCAEYC,IAFZ,gBAEYA,IAFZ,CAGIL,QAAQ,CAACN,WAAW,CAACW,IAAD,CAAZ,CAAR,CAHJ,+EAKIZ,WAAW,aAAX,CALJ,oEANiD,oEAA5C,CAgBP,MAAO,IAAMa,YAAW,CAAGd,gBAAgB,CAKzC,qBALyC,6FAMzC,kBAAOe,EAAP,oKAAYP,QAAZ,OAAYA,QAAZ,CAA6BC,GAA7B,OAAsBC,KAAtB,yCAEyBD,IAAG,CAACE,GAAJ,WAAmBN,QAAQ,CAACO,OAA5B,aAAuCG,EAAvC,EAFzB,uCAEWF,IAFX,iBAEWA,IAFX,CAGIL,QAAQ,CAACL,UAAU,CAACU,IAAD,CAAX,CAAR,CAHJ,mFAKIZ,WAAW,cAAX,CALJ,sEANyC,qEAApC,CAgBP,MAAO,IAAMe,cAAa,CAAGhB,gBAAgB,CAK3C,sBAL2C,6FAM3C,kBAAOe,EAAP,oKAAYP,QAAZ,OAAYA,QAAZ,CAA6BC,GAA7B,OAAsBC,KAAtB,yCAEyBD,IAAG,CAACE,GAAJ,WAAqBN,QAAQ,CAACO,OAA9B,aAAyCG,EAAzC,cAFzB,uCAEWF,IAFX,iBAEWA,IAFX,CAGIL,QAAQ,CAACJ,YAAY,CAACS,IAAD,CAAb,CAAR,CAHJ,mFAKIZ,WAAW,cAAX,CALJ,sEAN2C,qEAAtC,CAgBP,MAAO,IAAMgB,iBAAgB,CAAIjB,gBAAgB,CAK/C,yBAL+C,6FAM/C,kBAAOkB,OAAP,+IAAiBV,QAAjB,OAAiBA,QAAjB,CAAkCC,GAAlC,OAA2BC,KAA3B,yCAEUD,IAAG,CAACU,IAAJ,CAAmBd,QAAQ,CAACe,QAA5B,CAAsCF,OAAtC,CAFV,0FAIIjB,WAAW,cAAX,CAJJ,qEAN+C,qEAA1C"},"metadata":{},"sourceType":"module"}